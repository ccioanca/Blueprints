<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Timer Countdown</title>
  <meta name="description" content="Custom Timer Countdown.">
  <meta name="author" content="Cristian">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
  <style>
    /* body{
      background-color: gray;
      font-family: 'Lato', sans-serif;
      color: white;
    }
    
    .timer{
      display: block;
      font-size: 80px;
      text-shadow: #343253 0 7px 0;
      width: 100%;
      text-align: center;
      transition: opacity .3s;
    } */

    .fadeOut{
      opacity: 0;
      transition: opacity .2s;
    }
  </style>
</head>
<body>
  <span class="timer">
    <span id="hour-container"><span id="hours">00</span></span>
    <span id="minute-container">: <span id="minutes">00</span></span>
    <span id="second-container" style="display: none;">: <span id="seconds">00</span></span>
  </span>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="../Scripts/stream-common.js"></script>
  <script>
    const hQP = "hours";
    const mQP = "minutes";
    const sQP = "seconds";
    $(document).ready(function(){
      var ldEndtime = new Date(2021, 03, 25, 21, 0, 0); //Apr 25 9pm - 2021, 03, 25, 21, 0, 0
    //   console.log("LD:  " + ldEndtime);
    //   console.log("Now: " + Date.now());
      var dateDiff = ldEndtime - Date.now();

      var seconds = Math.floor(dateDiff / 1000);
      var minutes = Math.floor(seconds / 60);
      var hours = Math.floor(minutes / 60);

      minutes = minutes - (hours*60);
      seconds = seconds - (hours*60*60) - (minutes*60);

      var intervalID;

      $("#hours").html(pad(hours, 2));
      $("#minutes").html(pad(minutes, 2));
      $("#seconds").html(pad(seconds, 2));

      var countDown = function(){
        seconds--;

        if(hours == 0){
          $('#second-container').show();
          $('#hour-container').hide();
        }
        
        if(seconds < 0 && minutes == 0 && hours == 0)
        {
          clearInterval(intervalID);
        }
        else if(seconds < 0){
          seconds = 59;
          minutes--;
          if(minutes < 0)
          {
            minutes = 59;
            hours --;
          }

          $("#hours").html(pad(hours, 2));
          $("#minutes").html(pad(minutes, 2));
          $("#seconds").html(pad(seconds, 2));
        }
        else{
          $("#hours").html(pad(hours, 2));
          $("#minutes").html(pad(minutes, 2));
          $("#seconds").html(pad(seconds, 2));
        }
      }

      intervalID = setInterval(countDown, 1000);
    });
  </script>
</body>
</html>