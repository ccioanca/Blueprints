<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Timer Countdown</title>
  <meta name="description" content="Custom Timer Countdown.">
  <meta name="author" content="Cristian">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
  <style>
    /* body{
      background-color: gray;
      font-family: 'Lato', sans-serif;
      color: white;
    }
    
    .timer{
      display: block;
      font-size: 80px;
      text-shadow: #343253 0 7px 0;
      width: 100%;
      text-align: center;
      transition: opacity .3s;
    } */

    .fadeOut{
      opacity: 0;
      transition: opacity .2s;
    }
  </style>
</head>
<body>
  <span class="timer"><span id="minutes">00</span>:<span id="seconds">00</span></span>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="../Scripts/stream-common.js"></script>
  <script>
    const mQP = "minutes";
    const sQP = "seconds";
    $(document).ready(function(){
      urlParams = new URLSearchParams(window.location.search);
      var minutes = urlParams.get(mQP) || 0;
      var seconds = urlParams.get(sQP) || 10;

      var ogMinutes = urlParams.get(mQP) || 0;
      var ogSeconds = urlParams.get(sQP) || 10;
      var intervalID;

      $("#minutes").html(pad(minutes, 2));
      $("#seconds").html(pad(seconds, 2));

      var countDown = function(){
        seconds--;
        console.log(seconds);
        
        if(seconds < 0 && minutes > 0){
          seconds = 59;
          minutes--;
          $("#minutes").html(pad(minutes, 2));
          $("#seconds").html(pad(seconds, 2));
        }
        else if(seconds < 0 && minutes == 0)
        {
          //display different message
          $(".timer").addClass("fadeOut");
          setTimeout(function() { 
            $(".timer").html("Starting Shortly").removeClass('fadeOut');
          }, 300);
          clearInterval(intervalID);
        }
        else{
          $("#minutes").html(pad(minutes, 2));
          $("#seconds").html(pad(seconds, 2));
        }
      }

      intervalID = setInterval(countDown, 1000);

      document.addEventListener('keydown', function(event) {
        if (event.ctrlKey && event.altKey && event.key === "F12") {
            minutes = ogMinutes;
            seconds = ogSeconds;
            console.log("works");
        }
      });
    });
  </script>
</body>
</html>